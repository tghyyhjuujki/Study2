# AWS 2008007



load balancer : 부하분산 해줌

대상그룹(target group): 로드밸런서가 요청을 전달할 서버들을 묶어둔 개념적인 그룹

### 로드밸런서 생성

먼저 오토스케일링 그룹의 현재 인스턴스를 2개로 설정한다

로드밸런서 생성페이지 안에서 대상그룹도 생성한다

auto scaling group > 로드밸런싱에서 편집으로 대상그룹을 지정해준다.

대상그룹의 대상에서 health로 변경된 인스턴스 두 개를 확인할 수 있다.

![image-20200807105011990](200807_aws_day3.assets/image-20200807105011990.png)

로드밸런서의 DNS이름으로 호출하면 직접 호출할 필요가 없다

![image-20200807105151876](200807_aws_day3.assets/image-20200807105151876.png)

default가 round robbin 방식이기 때문에 번갈아가면서 호출되는 것을 확인할 수 있다.

![image-20200807105243974](200807_aws_day3.assets/image-20200807105243974.png)



다음과 같이 대상그룹 > 상태 검사 설정 > 편집으로 변경

![image-20200807105740399](200807_aws_day3.assets/image-20200807105740399.png)

이 상태에서 두개의 인스턴스중 아무거나 하나를 정지하고 다시 로드밸런서를 호출해보면 처음에는 정지된 인스턴스를 호출해서 bad gate가 뜨다가 살아있는 서버로만 연결해준다. 위 설정은 그러한 반응을 몇초만에 하는지 설정하는 작업

